<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>üåø Elegant To-Do App</title>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&family=Playfair+Display:wght@500;600&display=swap');

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: 'Inter', sans-serif;
      transition: background 0.6s ease, color 0.6s ease, backdrop-filter 0.6s ease;
    }

    body {
      background: linear-gradient(135deg, #a1c4fd, #c2e9fb);
      min-height: 100vh;
      display: flex;
      justify-content: center;
      align-items: flex-start;
      padding-top: 60px;
      color: #fff;
    }

    body.dark {
      background: linear-gradient(135deg, #141E30, #243B55);
      color: #e6e6e6;
    }

    .container {
      background: rgba(255, 255, 255, 0.12);
      backdrop-filter: blur(25px);
      border-radius: 22px;
      box-shadow: 0 15px 45px rgba(0, 0, 0, 0.25);
      width: 92%;
      max-width: 520px;
      padding: 35px 28px;
      animation: fadeIn 0.8s ease;
    }

    body.dark .container {
      background: rgba(255, 255, 255, 0.08);
      box-shadow: 0 15px 35px rgba(0, 0, 0, 0.45);
    }

    h1 {
      font-family: 'Playfair Display', serif;
      text-align: center;
      font-size: 30px;
      margin-bottom: 22px;
      letter-spacing: 0.5px;
      text-shadow: 0 2px 6px rgba(0,0,0,0.2);
    }

    .theme-toggle {
      position: absolute;
      top: 25px;
      right: 30px;
      background: rgba(255,255,255,0.3);
      border-radius: 50px;
      padding: 6px 12px;
      cursor: pointer;
      display: flex;
      align-items: center;
      gap: 8px;
      color: #fff;
      font-weight: 500;
      backdrop-filter: blur(10px);
      border: 1px solid rgba(255,255,255,0.2);
      transition: 0.3s;
    }

    .theme-toggle:hover {
      background: rgba(255,255,255,0.4);
      transform: scale(1.05);
    }

    .input-section {
      display: flex;
      flex-direction: column;
      gap: 10px;
      margin-bottom: 24px;
    }

    input, select, button {
      border: none;
      border-radius: 12px;
      padding: 12px;
      font-size: 15px;
      outline: none;
      font-weight: 500;
    }

    input[type="text"], input[type="datetime-local"], select {
      background: rgba(255, 255, 255, 0.25);
      color: #fff;
      backdrop-filter: blur(5px);
    }

    body.dark input, body.dark select {
      background: rgba(0,0,0,0.35);
      color: #f1f1f1;
    }

    ::placeholder {
      color: #eee;
    }

    button {
      background: linear-gradient(135deg, #6a11cb, #2575fc);
      color: white;
      cursor: pointer;
      font-weight: 600;
      letter-spacing: 0.4px;
      transition: all 0.3s ease;
    }

    button:hover {
      background: linear-gradient(135deg, #2575fc, #6a11cb);
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(0,0,0,0.25);
    }

    ul { list-style: none; }

    li {
      background: rgba(255, 255, 255, 0.15);
      backdrop-filter: blur(10px);
      margin-bottom: 12px;
      padding: 12px 15px;
      border-radius: 14px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      animation: slideUp 0.4s ease;
    }

    body.dark li {
      background: rgba(255, 255, 255, 0.1);
    }

    li.completed {
      background: rgba(0, 0, 0, 0.25);
      text-decoration: line-through;
      opacity: 0.7;
    }

    .task-info { flex: 1; overflow-wrap: anywhere; }

    .task-info .title { font-size: 16px; font-weight: 600; }

    .task-info .datetime { font-size: 13px; opacity: 0.9; margin-top: 4px; }

    .category {
      font-size: 13px;
      margin-top: 2px;
      opacity: 0.85;
      font-style: italic;
    }

    .actions button {
      background: transparent;
      border: none;
      cursor: pointer;
      font-size: 18px;
      margin-left: 6px;
      color: inherit;
      transition: transform 0.2s;
    }

    .actions button:hover { transform: scale(1.2); }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }

    @keyframes slideUp {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }
  </style>
</head>
<body>
  <div class="theme-toggle" id="themeToggle">
    üåû <span>Light</span>
  </div>

  <div class="container">
    <h1>ü™∂ My Elegant To-Do List</h1>
    <div class="input-section">
      <input type="text" id="taskInput" placeholder="Enter a new task..." />
      <input type="datetime-local" id="taskDateTime" />
      <select id="taskCategory">
        <option value="Work">üíº Work</option>
        <option value="Personal">üå∏ Personal</option>
        <option value="Shopping">üõí Shopping</option>
        <option value="Study">üìò Study</option>
        <option value="Others">‚ú® Others</option>
      </select>
      <button id="addBtn">Add Task</button>
    </div>
    <ul id="taskList"></ul>
  </div>

  <script>
    const addBtn = document.getElementById("addBtn");
    const taskInput = document.getElementById("taskInput");
    const taskDateTime = document.getElementById("taskDateTime");
    const taskCategory = document.getElementById("taskCategory");
    const taskList = document.getElementById("taskList");
    const themeToggle = document.getElementById("themeToggle");

    document.addEventListener("DOMContentLoaded", () => {
      loadTasks();
      loadTheme();
    });

    addBtn.addEventListener("click", addTask);
    themeToggle.addEventListener("click", toggleTheme);

    function addTask() {
      const text = taskInput.value.trim();
      const datetime = taskDateTime.value;
      const category = taskCategory.value;

      if (!text) {
        alert("Please enter a task!");
        return;
      }

      const task = { text, datetime, category, completed: false };
      createTaskElement(task);
      saveTask(task);

      taskInput.value = "";
      taskDateTime.value = "";
    }

    function createTaskElement(task) {
      const li = document.createElement("li");
      if (task.completed) li.classList.add("completed");

      const info = document.createElement("div");
      info.classList.add("task-info");

      const title = document.createElement("div");
      title.classList.add("title");
      title.textContent = task.text;

      const date = document.createElement("div");
      date.classList.add("datetime");
      if (task.datetime) {
        const d = new Date(task.datetime);
        date.textContent = "‚è∞ " + d.toLocaleString();
      }

      const cat = document.createElement("div");
      cat.classList.add("category");
      cat.textContent = task.category;

      info.append(title, date, cat);

      const actions = document.createElement("div");
      actions.classList.add("actions");

      const doneBtn = document.createElement("button");
      doneBtn.innerHTML = "‚úÖ";
      doneBtn.addEventListener("click", () => toggleComplete(li, task));

      const editBtn = document.createElement("button");
      editBtn.innerHTML = "‚úèÔ∏è";
      editBtn.addEventListener("click", () => editTask(task, title));

      const delBtn = document.createElement("button");
      delBtn.innerHTML = "üóëÔ∏è";
      delBtn.addEventListener("click", () => deleteTask(task, li));

      actions.append(doneBtn, editBtn, delBtn);
      li.append(info, actions);
      taskList.appendChild(li);
    }

    function saveTask(task) {
      const tasks = getTasks();
      tasks.push(task);
      localStorage.setItem("tasks", JSON.stringify(tasks));
    }

    function getTasks() {
      return JSON.parse(localStorage.getItem("tasks")) || [];
    }

    function loadTasks() {
      const tasks = getTasks();
      tasks.forEach(createTaskElement);
    }

    function toggleComplete(li, task) {
      li.classList.toggle("completed");
      task.completed = !task.completed;
      updateStorage();
    }

    function editTask(task, titleElem) {
      const newText = prompt("Edit task:", task.text);
      if (newText) {
        task.text = newText;
        titleElem.textContent = newText;
        updateStorage();
      }
    }

    function deleteTask(task, li) {
      li.remove();
      const tasks = getTasks().filter(t =>
        !(t.text === task.text && t.datetime === task.datetime && t.category === task.category)
      );
      localStorage.setItem("tasks", JSON.stringify(tasks));
    }

    function updateStorage() {
      const listItems = taskList.querySelectorAll("li");
      const updatedTasks = [];
      listItems.forEach(li => {
        const text = li.querySelector(".title").textContent;
        const datetimeText = li.querySelector(".datetime").textContent.replace("‚è∞ ", "");
        const category = li.querySelector(".category").textContent;
        const completed = li.classList.contains("completed");
        updatedTasks.push({ text, datetime: datetimeText, category, completed });
      });
      localStorage.setItem("tasks", JSON.stringify(updatedTasks));
    }

    // üåô Theme Handling
    function toggleTheme() {
      document.body.classList.toggle("dark");
      const isDark = document.body.classList.contains("dark");
      localStorage.setItem("theme", isDark ? "dark" : "light");
      updateThemeButton();
    }

    function loadTheme() {
      const savedTheme = localStorage.getItem("theme");
      if (savedTheme === "dark") document.body.classList.add("dark");
      updateThemeButton();
    }

    function updateThemeButton() {
      const isDark = document.body.classList.contains("dark");
      themeToggle.innerHTML = isDark ? "üåô <span>Dark</span>" : "üåû <span>Light</span>";
    }
  </script>
</body>
</html>
